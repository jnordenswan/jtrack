PRAGMA foreign_keys=ON;
PRAGMA encoding = "UTF-8";
BEGIN TRANSACTION;

CREATE TABLE node (
    id INTEGER CONSTRAINT pk PRIMARY KEY ASC AUTOINCREMENT,
    type TEXT CONSTRAINT nn NOT NULL,
    data CONSTRAINT nn NOT NULL,
    routine INTEGER CONSTRAINT nn NOT NULL CONSTRAINT df DEFAULT 0);
INSERT INTO "node" VALUES(1,'R','86400,86400,86400,86400,259200',0);
INSERT INTO "node" VALUES(2,'C','Five consecutive days a week',0);
INSERT INTO "node" VALUES(3,'P',1393828200,1);
INSERT INTO "node" VALUES(4,'C','Monday morning 07:30',0);
INSERT INTO "node" VALUES(5,'S',600,1);
INSERT INTO "node" VALUES(6,'C','Clear kitchen',0);
INSERT INTO "node" VALUES(7,'S',1200,1);
INSERT INTO "node" VALUES(8,'C','Eat breakfast',0);
INSERT INTO "node" VALUES(9,'S',1200,1);
INSERT INTO "node" VALUES(10,'C','Wash',0);
INSERT INTO "node" VALUES(11,'S',600,1);
INSERT INTO "node" VALUES(12,'C','Set breakfast',0);
INSERT INTO "node" VALUES(13,'S',1800,1);
INSERT INTO "node" VALUES(14,'C','Exercise',0);
INSERT INTO "node" VALUES(15,'S',300,1);
INSERT INTO "node" VALUES(16,'C','Start breakfast',0);
INSERT INTO "node" VALUES(17,'S',900,1);
INSERT INTO "node" VALUES(18,'C','Quicken',0);

CREATE TABLE relation (
    parent INTEGER CONSTRAINT nn NOT NULL,
    child INTEGER CONSTRAINT nn NOT NULL,
    FOREIGN KEY(parent) REFERENCES node(id) ON DELETE CASCADE,
    FOREIGN KEY(child) REFERENCES node(id) ON DELETE CASCADE);
INSERT INTO "relation" VALUES(1,2);
INSERT INTO "relation" VALUES(1,3);
INSERT INTO "relation" VALUES(3,4);
INSERT INTO "relation" VALUES(3,5);
INSERT INTO "relation" VALUES(5,6);
INSERT INTO "relation" VALUES(5,7);
INSERT INTO "relation" VALUES(7,8);
INSERT INTO "relation" VALUES(7,9);
INSERT INTO "relation" VALUES(9,10);
INSERT INTO "relation" VALUES(9,11);
INSERT INTO "relation" VALUES(11,12);
INSERT INTO "relation" VALUES(11,13);
INSERT INTO "relation" VALUES(13,14);
INSERT INTO "relation" VALUES(13,15);
INSERT INTO "relation" VALUES(15,16);
INSERT INTO "relation" VALUES(15,17);
INSERT INTO "relation" VALUES(17,18);

CREATE TABLE commitment (
    id INTEGER CONSTRAINT pk PRIMARY KEY ASC AUTOINCREMENT,
    start_time INTEGER CONSTRAINT nn NOT NULL,
    end_time INTEGER CONSTRAINT nn NOT NULL,
    draft INTEGER CONSTRAINT nn NOT NULL);

CREATE TABLE commitlet (
    commitment_id INTEGER CONSTRAINT nn NOT NULL,
    node_id INTEGER CONSTRAINT nn NOT NULL,
    pass INTEGER,
    FOREIGN KEY(commitment_id) REFERENCES commitment(id) ON DELETE CASCADE,
    FOREIGN KEY(node_id) REFERENCES node(id) ON DELETE CASCADE);

DELETE FROM sqlite_sequence;
INSERT INTO "sqlite_sequence" VALUES('node',18);
COMMIT;
